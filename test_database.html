<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</title>
    <script src="./_sdk/data_sdk.js"></script>
    <script src="./_sdk/element_sdk.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #667eea;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .test-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .test-section h2 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: transform 0.2s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .result {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid #667eea;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .result pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            direction: ltr;
            text-align: left;
        }
        
        .status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
        }
        
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¸Ø§Ù… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h1>
        
        <div class="test-section">
            <h2>1ï¸âƒ£ Ø§Ø®ØªØ¨Ø§Ø± Data SDK (IndexedDB)</h2>
            <button class="btn" onclick="testCreateCategory()">Ø¥Ø¶Ø§ÙØ© ØªØµÙ†ÙŠÙ ØªØ¬Ø±ÙŠØ¨ÙŠ</button>
            <button class="btn" onclick="testCreateProduct()">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ</button>
            <button class="btn" onclick="testLoadData()">Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
            <button class="btn" onclick="testClearData()">Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
            <div id="dataResult" class="result" style="display: none;"></div>
        </div>
        
        <div class="test-section">
            <h2>2ï¸âƒ£ Ø§Ø®ØªØ¨Ø§Ø± Element SDK (Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª)</h2>
            <button class="btn" onclick="testLoadConfig()">Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
            <button class="btn" onclick="testUpdateConfig()">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
            <button class="btn" onclick="testResetConfig()">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
            <div id="configResult" class="result" style="display: none;"></div>
        </div>
        
        <div class="test-section">
            <h2>3ï¸âƒ£ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h2>
            <div id="systemInfo" class="result"></div>
        </div>
    </div>

    <script>
        // Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
        window.addEventListener('load', async () => {
            const systemInfo = document.getElementById('systemInfo');
            systemInfo.innerHTML = `
                <div class="status info">Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø² âœ“</div>
                <p><strong>Data SDK:</strong> ${window.dataSdk ? 'âœ… Ù…Ø­Ù…Ù‘Ù„' : 'âŒ ØºÙŠØ± Ù…Ø­Ù…Ù‘Ù„'}</p>
                <p><strong>Element SDK:</strong> ${window.elementSdk ? 'âœ… Ù…Ø­Ù…Ù‘Ù„' : 'âŒ ØºÙŠØ± Ù…Ø­Ù…Ù‘Ù„'}</p>
                <p><strong>IndexedDB:</strong> ${window.indexedDB ? 'âœ… Ù…Ø¯Ø¹ÙˆÙ…' : 'âŒ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…'}</p>
                <p><strong>localStorage:</strong> ${window.localStorage ? 'âœ… Ù…Ø¯Ø¹ÙˆÙ…' : 'âŒ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…'}</p>
            `;
            
            // ØªÙ‡ÙŠØ¦Ø© Data SDK
            if (window.dataSdk) {
                const result = await window.dataSdk.init({
                    onDataChanged: (data) => {
                        console.log('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', data.length, 'Ø³Ø¬Ù„');
                    }
                });
                
                if (result.isOk) {
                    console.log('âœ… Data SDK ØªÙ… ØªÙ‡ÙŠØ¦ØªÙ‡ Ø¨Ù†Ø¬Ø§Ø­');
                }
            }
            
            // ØªÙ‡ÙŠØ¦Ø© Element SDK
            if (window.elementSdk) {
                const result = await window.elementSdk.init({
                    defaultConfig: {
                        store_name: 'Ù…ØªØ¬Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ',
                        tax_rate: 15,
                        currency: 'Ø±.Ø³'
                    }
                });
                
                if (result.isOk) {
                    console.log('âœ… Element SDK ØªÙ… ØªÙ‡ÙŠØ¦ØªÙ‡ Ø¨Ù†Ø¬Ø§Ø­');
                }
            }
        });
        
        // Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø¶Ø§ÙØ© ØªØµÙ†ÙŠÙ
        async function testCreateCategory() {
            const result = await window.dataSdk.create({
                type: 'category',
                category_id: 'cat_' + Date.now(),
                category_name: 'ØªØµÙ†ÙŠÙ ØªØ¬Ø±ÙŠØ¨ÙŠ ' + new Date().toLocaleTimeString('ar-SA'),
                category_icon: 'fas fa-box',
                timestamp: new Date().toISOString()
            });
            
            showResult('dataResult', result.isOk ? 'success' : 'error', 
                result.isOk ? 'âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØµÙ†ÙŠÙ Ø¨Ù†Ø¬Ø§Ø­!' : 'âŒ ÙØ´Ù„ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØµÙ†ÙŠÙ',
                result
            );
        }
        
        // Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬
        async function testCreateProduct() {
            const result = await window.dataSdk.create({
                type: 'product',
                product_id: 'prod_' + Date.now(),
                product_name: 'Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ ' + new Date().toLocaleTimeString('ar-SA'),
                product_price: Math.floor(Math.random() * 1000) + 100,
                product_quantity: Math.floor(Math.random() * 50) + 10,
                product_barcode: Date.now().toString(),
                category_id: 'cat_general',
                timestamp: new Date().toISOString()
            });
            
            showResult('dataResult', result.isOk ? 'success' : 'error',
                result.isOk ? 'âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­!' : 'âŒ ÙØ´Ù„ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬',
                result
            );
        }
        
        // Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        async function testLoadData() {
            const data = window.dataSdk.getAll();
            
            showResult('dataResult', 'info',
                `ğŸ“Š Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ø¬Ù„Ø§Øª: ${data.length}`,
                {
                    total: data.length,
                    categories: data.filter(d => d.type === 'category').length,
                    products: data.filter(d => d.type === 'product').length,
                    sales: data.filter(d => d.type === 'sale').length,
                    data: data
                }
            );
        }
        
        // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        async function testClearData() {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ')) {
                return;
            }
            
            const result = await window.dataSdk.clearAll();
            
            showResult('dataResult', result.isOk ? 'success' : 'error',
                result.isOk ? 'âœ… ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª' : 'âŒ ÙØ´Ù„ Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
                result
            );
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        async function testLoadConfig() {
            const config = window.elementSdk.getConfig();
            
            showResult('configResult', 'info', 'âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©', config);
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        async function testUpdateConfig() {
            const result = await window.elementSdk.updateConfig({
                store_name: 'Ù…ØªØ¬Ø± Ù…Ø­Ø¯Ù‘Ø« ' + new Date().toLocaleTimeString('ar-SA'),
                tax_rate: Math.floor(Math.random() * 20) + 5
            });
            
            showResult('configResult', result.isOk ? 'success' : 'error',
                result.isOk ? 'âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª' : 'âŒ ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª',
                result
            );
        }
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        async function testResetConfig() {
            const result = await window.elementSdk.resetConfig();
            
            showResult('configResult', result.isOk ? 'success' : 'error',
                result.isOk ? 'âœ… ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª' : 'âŒ ÙØ´Ù„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†',
                result
            );
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
        function showResult(elementId, status, message, data) {
            const element = document.getElementById(elementId);
            element.style.display = 'block';
            element.innerHTML = `
                <div class="status ${status}">${message}</div>
                <pre>${JSON.stringify(data, null, 2)}</pre>
            `;
            element.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    </script>
</body>
</html>
